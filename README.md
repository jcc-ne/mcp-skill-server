# MCP Skill Server

A local MCP server for developing and testing skills before deploying them to production agents.

## Why?

Building skills for enterprise agents is slow: write code → deploy → test → iterate. This tool lets you **dog food locally** - test skills on your machine before pushing to production.

## Quick Start

```bash
# Install with uv (recommended)
uv pip install mcp-skill-server

# Or install from source
git clone https://github.com/your-org/mcp-skill-server
cd mcp-skill-server
uv sync

# Run the server
uv run mcp-skill-server /path/to/my/skills
```

## Configuration

### Claude Code

Add to your `~/.claude/settings.json`:

```json
{
  "mcpServers": {
    "skills": {
      "command": "uv",
      "args": ["run", "--directory", "/path/to/mcp-skill-server", "mcp-skill-server", "/path/to/my/skills"]
    }
  }
}
```

Or configure per-project in `.claude/settings.json` in your project root.

### Cursor

Add to your Cursor MCP settings (Settings → MCP → Add Server):

```json
{
  "mcpServers": {
    "skills": {
      "command": "uv",
      "args": ["run", "--directory", "/path/to/mcp-skill-server", "mcp-skill-server", "/path/to/my/skills"]
    }
  }
}
```

Or add to `.cursor/mcp.json` in your project:

```json
{
  "mcpServers": {
    "skills": {
      "command": "uv",
      "args": ["run", "--directory", "/path/to/mcp-skill-server", "mcp-skill-server", "/path/to/my/skills"]
    }
  }
}
```

### Claude Desktop

Add to `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) or `%APPDATA%\Claude\claude_desktop_config.json` (Windows):

```json
{
  "mcpServers": {
    "skills": {
      "command": "uv",
      "args": ["run", "--directory", "/path/to/mcp-skill-server", "mcp-skill-server", "/path/to/my/skills"]
    }
  }
}
```

## Creating a Skill

### Option A: Use `skill init` (recommended)

```bash
# Create a new skill
uv run mcp-skill-server init ./my_skills/hello -n "hello" -d "A friendly greeting"

# Or convert an existing Claude skill (adds entry point)
uv run mcp-skill-server init ./existing_claude_skill

# Validate before deployment
uv run mcp-skill-server validate ./my_skills/hello
```

### Option B: Manual setup

#### 1. Create a folder with your script

```
my_skills/
└── hello/
    ├── SKILL.md
    └── hello.py
```

#### 2. Add SKILL.md with frontmatter

```yaml
---
name: hello
description: A friendly greeting skill
entry: uv run python hello.py
---

# Hello Skill

Greets the user by name.
```

#### 3. Write your script with argparse

```python
# hello.py
import argparse

parser = argparse.ArgumentParser(description="Greeting skill")
parser.add_argument("--name", default="World", help="Name to greet")
args = parser.parse_args()

print(f"Hello, {args.name}!")
```

### Skill Maturity Progression

```
1. Claude Skill (no entry)     → Prompt-based, LLM uses its own tools
2. MCP Skill (entry required)  → Formalized script, testable via MCP
3. Production                  → Deployed to enterprise MCP server
```

Use `skill init` to promote from stage 1 → 2.

### Validate Before Deployment

```bash
uv run mcp-skill-server validate ./my_skills/hello
```

Checks:
- Required frontmatter fields (name, description, entry)
- Entry command uses allowed runtime
- Script file exists
- Commands discoverable via `--help`

## MCP Tools

The server exposes these tools:

| Tool | Description |
|------|-------------|
| `list_skills` | List all available skills |
| `get_skill` | Get details about a skill (commands, parameters) |
| `run_skill` | Execute a skill with parameters |
| `refresh_skills` | Reload skills after changes |

## Skill Format

Skills are defined by a `SKILL.md` file with YAML frontmatter:

```yaml
---
name: my-skill          # Unique identifier
description: What it does   # Shown in skill list
entry: python script.py     # How to run it
---

# Documentation

Markdown docs shown when inspecting the skill.
```

## Schema Discovery

The server automatically discovers your skill's interface by parsing `--help` output:

```python
# Subcommands become separate commands
subparsers = parser.add_subparsers(dest='command')
analyze = subparsers.add_parser('analyze', help='Run analysis')

# Arguments become parameters with inferred types
analyze.add_argument('--year', type=int, required=True)  # int, required
analyze.add_argument('--file', type=str)                  # string, optional
```

## Output Files

Files saved to `output/` are automatically detected. Alternatively, print `OUTPUT_FILE:/path/to/file` to stdout.

## Development

```bash
# Clone and install
git clone https://github.com/your-org/mcp-skill-server
cd mcp-skill-server
uv sync --dev

# Run tests
uv run pytest

# Run server with example skills
uv run mcp-skill-server examples/
```

## Plugins

The server supports two types of plugins for customization:

### Output Handlers

Process files generated by skills (upload, copy, transform, etc.):

```python
from mcp_skill_server.plugins import OutputHandler, LocalOutputHandler

# Default: tracks local file paths
handler = LocalOutputHandler()

# Optional GCS handler (requires `uv sync --extra gcs`)
from mcp_skill_server.plugins import GCSOutputHandler
handler = GCSOutputHandler(
    bucket_name="my-bucket",
    folder_prefix="skills/outputs/",
)
```

### Response Formatters

Customize how execution results are formatted in MCP tool responses:

```python
from mcp_skill_server.plugins import ResponseFormatter

class CustomFormatter(ResponseFormatter):
    def format_execution_result(self, result, skill, command):
        # Return custom formatted string
        return f"Result: {result.stdout}"

# Use with create_server()
from mcp_skill_server import create_server
server = create_server(
    "/path/to/skills",
    response_formatter=CustomFormatter()
)
```

## License

MIT
